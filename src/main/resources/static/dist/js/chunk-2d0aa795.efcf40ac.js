(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aa795"],{"10bb":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(t){e.dialogAddFriendVisible=!0}}},[e._v("添加好友")]),a("el-badge",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{value:e.addRequestNum,type:"primary"}},[a("el-button",{attrs:{type:"success",size:"small",plain:""},on:{click:function(t){e.dialogAddRequestVisible=!0}}},[e._v("好友申请")])],1),a("el-badge",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{value:e.myRequestNum,type:"primary"}},[a("el-button",{attrs:{type:"success",size:"small",plain:""},on:{click:function(t){e.dialogMyRequestVisible=!0}}},[e._v("我的申请")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"date",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"性别",width:"180"}}),a("el-table-column",{attrs:{prop:"address",label:"邮箱"}}),a("el-table-column",{attrs:{prop:"address",label:"邮箱"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("详情")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"添加好友",visible:e.dialogAddFriendVisible},on:{"update:visible":function(t){e.dialogAddFriendVisible=t}}},[a("el-form",{attrs:{model:e.friend}},[a("el-form-item",{attrs:{label:"添加好友","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.friend.account2,callback:function(t){e.$set(e.friend,"account2",t)},expression:"friend.account2"}})],1),a("el-form-item",{attrs:{label:"申请信息","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.friend.detail,callback:function(t){e.$set(e.friend,"detail",t)},expression:"friend.detail"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAddFriendVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAddFriendVisible=!1,e.addFriend()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"好友申请",visible:e.dialogAddRequestVisible},on:{"update:visible":function(t){e.dialogAddRequestVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.requestData}},[a("el-table-column",{attrs:{prop:"account",label:"账号",width:"180"}}),a("el-table-column",{attrs:{prop:"detail",label:"申请信息",width:"450"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleAgree(t.$index,t.row)}}},[e._v("同意")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleRefuse(t.$index,t.row)}}},[e._v("拒绝")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"我的申请",visible:e.dialogMyRequestVisible},on:{"update:visible":function(t){e.dialogMyRequestVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.myRequestData}},[a("el-table-column",{attrs:{prop:"account",label:"账号",width:"180"}}),a("el-table-column",{attrs:{prop:"detail",label:"申请信息",width:"450"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleCancel(t.$index,t.row)}}},[e._v("取消")])]}}])})],1)],1)],1)},n=[],i=a("b775"),s=[{name:"queryFriends",url:"/friend/getFriends",type:"get"},{name:"addFriend",url:"/friend/addRequest",type:"post"},{name:"updateRel",url:"/friend/updateRel",type:"post"},{name:"getRequest",url:"/friend/getRequest",type:"get"}],o=i["a"].createApiObj(s),d=o,r=a("ca00"),u={name:"Friend",data:function(){return{tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}],requestData:[{}],myRequestData:[{}],dialogAddFriendVisible:!1,dialogAddRequestVisible:!1,dialogMyRequestVisible:!1,friend:{account1:"",account2:"",addStatus:0,detail:""},formLabelWidth:"120px",loginInfo:"",addRequestNum:"",myRequestNum:""}},mounted:function(){this.loginInfo=Object(r["b"])(),this.queryFriendList(),this.getRequest(1),this.getRequest(0)},methods:{queryFriendList:function(){d.queryFriends({account:this.loginInfo.user_account}).then((function(e){console.log(e)}))},getRequest:function(e){var t=this;d.getRequest({account:this.loginInfo.user_account,flag:e}).then((function(a){console.log(a),666===a.code?1===e?(t.addRequestNum=0==a.obj.length?"":a.obj.length,t.requestData=a.obj):(t.myRequestNum=0==a.obj.length?"":a.obj.length,t.myRequestData=a.obj):t.$message.error("加载好友申请信息失败")}))},handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},handleAgree:function(e,t){var a=this;console.log(e,t);var l={account1:this.loginInfo.user_account,account2:t.account,addStatus:1,detail:"你是谁"};d.updateRel(l).then((function(e){666===e.code&&(a.$message.success("添加成功"),a.getRequest(0),a.queryFriendList())}))},handleRefuse:function(e,t){var a=this;console.log(e,t);var l={account1:this.loginInfo.user_account,account2:t.user_account,addStatus:2,detail:"你是谁"};d.updateRel(l).then((function(e){666===e.code&&(a.$message.success("操作成功"),a.getRequest(0),a.queryFriendList())}))},handleCancel:function(e,t){},addFriend:function(){var e=JSON.parse(sessionStorage.getItem("LOGIN_USER")).user_account;console.log(e),this.friend.account1=e,console.log(this.friend),d.addFriend(this.friend).then((function(e){console.log(e)}))}}},c=u,b=a("2877"),f=Object(b["a"])(c,l,n,!1,null,null,null);t["default"]=f.exports}}]);