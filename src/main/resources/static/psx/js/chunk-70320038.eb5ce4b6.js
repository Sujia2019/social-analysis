(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70320038"],{"4d81":function(e,t,s){"use strict";s("ef1e")},7156:function(e,t,s){var n=s("861d"),r=s("d2bb");e.exports=function(e,t,s){var o,c;return r&&"function"==typeof(o=t.constructor)&&o!==s&&n(c=o.prototype)&&c!==s.prototype&&r(e,c),e}},a4d7:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat-box"},[s("header",[e._v("聊天室人数："+e._s(e.count))]),s("div",{ref:"msg-box",staticClass:"msg-box"},e._l(e.list,(function(t,n){return s("div",{key:n,staticClass:"msg",style:t.userId==e.userId?"flex-direction:row-reverse":""},[s("div",{staticClass:"user-head"},[s("div",{staticClass:"head",style:" background: hsl("+e.getUserHead(t.userId,"bck")+", 88%, 62%); clip-path:polygon("+e.getUserHead(t.userId,"polygon")+"% 0,100% 100%,0% 100%); transform: rotate("+e.getUserHead(t.userId,"rotate")+"deg)"})]),s("div",{staticClass:"user-msg"},[s("div",{class:t.userId==e.userId?"user-name-right":""},[e._v(e._s(t.userName))]),s("div",{staticClass:"msg-div",class:t.userId==e.userId?"right":"left"},[e._v(e._s(t.content))])])])})),0)])},r=[],o=(s("99af"),s("caad"),s("a9e3"),s("2532"),s("2909")),c=s("ca00"),i={data:function(){return{ws:null,count:0,userId:null,list:[],contentText:"",loginUser:null}},created:function(){this.loginUser=Object(c["b"])(),this.getUserID()},mounted:function(){this.initWebSocket()},destroyed:function(){this.ws.close()},methods:{getUserID:function(){var e=(new Date).getTime();this.userId=e},getUserHead:function(e,t){var s=String(e);return"bck"==t?Number(s.substring(s.length-3)):"polygon"==t?Number(s.substring(s.length-2)):"rotate"==t?Number(s.substring(s.length-3)):void 0},scrollBottm:function(){var e=this.$refs["msg-box"];e.scrollTop=e.scrollHeight},sendText:function(){var e=this;if(e.$refs["sendMsg"].focus(),e.contentText){var t={userId:e.userId,userName:e.loginUser.user_account,msg:e.contentText};e.ws.send(JSON.stringify(t)),e.contentText="",setTimeout((function(){e.scrollBottm()}),500)}},initWebSocket:function(){var e=this;if(window.WebSocket){var t=new WebSocket("ws://47.93.225.242:8888/websocket");e.ws=t,t.onopen=function(e){console.log("服务器连接成功")},t.onclose=function(e){console.log("服务器连接关闭")},t.onerror=function(){console.log("服务器连接出错")},t.onmessage=function(t){var s=t.data;console.log(s),s.includes("有新连接加入")?(console.log(s[s.length-1]),e.count=s[s.length-1]):(s=JSON.parse(s),e.list=[].concat(Object(o["a"])(e.list),[{userId:s.userId,userName:s.userName,content:s.msg}]))}}}}},a=i,u=(s("4d81"),s("2877")),l=Object(u["a"])(a,n,r,!1,null,"60e8b826",null);t["default"]=l.exports},a9e3:function(e,t,s){"use strict";var n=s("83ab"),r=s("da84"),o=s("94ca"),c=s("6eeb"),i=s("5135"),a=s("c6b6"),u=s("7156"),l=s("c04e"),d=s("d039"),f=s("7c73"),g=s("241c").f,h=s("06cf").f,I=s("9bf2").f,b=s("58a8").trim,v="Number",p=r[v],m=p.prototype,N=a(f(m))==v,w=function(e){var t,s,n,r,o,c,i,a,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=b(u),t=u.charCodeAt(0),43===t||45===t){if(s=u.charCodeAt(2),88===s||120===s)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+u}for(o=u.slice(2),c=o.length,i=0;i<c;i++)if(a=o.charCodeAt(i),a<48||a>r)return NaN;return parseInt(o,n)}return+u};if(o(v,!p(" 0o1")||!p("0b1")||p("+0x1"))){for(var _,k=function(e){var t=arguments.length<1?0:e,s=this;return s instanceof k&&(N?d((function(){m.valueOf.call(s)})):a(s)!=v)?u(new p(w(t)),s,k):w(t)},y=n?g(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),T=0;y.length>T;T++)i(p,_=y[T])&&!i(k,_)&&I(k,_,h(p,_));k.prototype=m,m.constructor=k,c(r,v,k)}},ef1e:function(e,t,s){}}]);