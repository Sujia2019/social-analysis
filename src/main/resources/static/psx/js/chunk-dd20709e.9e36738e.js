(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd20709e"],{"47d7":function(e,t,r){"use strict";var a=r("b775"),s=[{name:"queryBoardMsg",url:"/board/showBoardMsg",type:"get"},{name:"addBoardMsg",url:"/board/addBoardMsg",type:"post"},{name:"showInfo",url:"/stu/showInfo",type:"get"},{name:"updateInfo",url:"/stu/update",type:"post"},{name:"showQuestion",url:"/question/show",type:"get"},{name:"sendAnswers",url:"/question/sendAnswers",type:"post"},{name:"isFinished",url:"/question/isFinished",type:"get"},{name:"getResult",url:"/question/getResult",type:"get"}],i=a["a"].createApiObj(s);t["a"]=i},"5ab3":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("用户管理")])]),r("div",{staticStyle:{display:"flex","justify-content":"flex-start","margin-bottom":"20px"}},[r("el-input",{staticStyle:{width:"220px"},attrs:{size:"mini",placeholder:"账号"},model:{value:e.queryInfo.user_account,callback:function(t){e.$set(e.queryInfo,"user_account",t)},expression:"queryInfo.user_account"}}),r("el-input",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{size:"mini",placeholder:"姓名"},model:{value:e.queryInfo.sname,callback:function(t){e.$set(e.queryInfo,"sname",t)},expression:"queryInfo.sname"}}),r("el-input",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{size:"mini",placeholder:"邮箱"},model:{value:e.queryInfo.email,callback:function(t){e.$set(e.queryInfo,"email",t)},expression:"queryInfo.email"}}),r("el-input",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{size:"mini",placeholder:"手机"},model:{value:e.queryInfo.phone,callback:function(t){e.$set(e.queryInfo,"phone",t)},expression:"queryInfo.phone"}}),r("el-input",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{size:"mini",placeholder:"学校"},model:{value:e.queryInfo.collage,callback:function(t){e.$set(e.queryInfo,"collage",t)},expression:"queryInfo.collage"}}),r("el-input",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{size:"mini",placeholder:"生日"},model:{value:e.queryInfo.birth,callback:function(t){e.$set(e.queryInfo,"birth",t)},expression:"queryInfo.birth"}}),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:e.findAll}},[e._v("搜索")])],1),r("div",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.dialogAddCustomVisible=!0}}},[e._v("新增用户")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"user_account",label:"用户名",width:"180"}}),r("el-table-column",{attrs:{prop:"sname",label:"姓名",width:"180"}}),r("el-table-column",{attrs:{prop:"gender",label:"性别",width:"180",formatter:e.setGender}}),r("el-table-column",{attrs:{prop:"phone",label:"手机"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.handleDetail(t.$index,t.row)}}},[e._v("查看详情")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-drawer",{attrs:{title:"好友详情",visible:e.drawer,direction:e.direction,"before-close":e.handleClose},on:{"update:visible":function(t){e.drawer=t}}},[r("el-card",{staticClass:"box-card",staticStyle:{height:"calc(100vh - 77px)"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-tag",{attrs:{type:"success"}},[e._v("姓名")]),e._v(":"+e._s(e.drawerFriend.sname))],1),r("el-col",{attrs:{span:12}},[r("el-tag",{attrs:{type:"success"}},[e._v("性别")]),e._v(":"+e._s(0==e.drawerFriend.gender?"男":"女"))],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-tag",{attrs:{type:"success"}},[e._v("电话")]),e._v(":"+e._s(e.drawerFriend.phone))],1),r("el-col",{attrs:{span:12}},[r("el-tag",{attrs:{type:"success"}},[e._v("邮箱")]),e._v(":"+e._s(e.drawerFriend.email))],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-tag",{attrs:{type:"success"}},[e._v("大学")]),e._v(":"+e._s(e.drawerFriend.collage))],1),r("el-col",{attrs:{span:12}},[r("el-tag",{attrs:{type:"success"}},[e._v("专业")]),e._v(":"+e._s(e.drawerFriend.major))],1)],1),r("el-divider",[e._v("message board")]),r("div",{staticStyle:{height:"calc(100% - 184px)","overflow-y":"auto"}},e._l(e.drawerBoard,(function(t,a){return r("div",{key:a},[r("el-tag",{staticStyle:{"font-size":"16px"},attrs:{type:"warning",size:"small"}},[e._v(e._s(t.from_name))]),e._v(": "),r("span",{staticStyle:{"font-size":"16px","line-height":"12px"}},[e._v(e._s(t.board_text))]),r("div",{staticStyle:{display:"flex","justify-content":"flex-end","font-size":"14px"}},[e._v(e._s(t.date_time))]),r("el-divider")],1)})),0)],1)],1),r("el-dialog",{attrs:{title:"新增用户",visible:e.dialogAddCustomVisible,width:"50%"},on:{"update:visible":function(t){e.dialogAddCustomVisible=t}}},[r("div",{staticClass:"login-div"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-position":"top","label-width":"80px",model:e.register,rules:e.rules}},[r("el-form-item",{attrs:{label:"用户名",prop:"user_account"}},[r("el-input",{attrs:{placeholder:"Account/Phone/Email",size:"mini"},model:{value:e.register.user_account,callback:function(t){e.$set(e.register,"user_account",t)},expression:"register.user_account"}},[r("template",{slot:"prepend"},[r("i",{staticClass:"el-icon-user"})])],2)],1),r("el-form-item",{attrs:{label:"密码",prop:"user_pwd"}},[r("el-input",{attrs:{placeholder:"Password",size:"mini","show-password":""},model:{value:e.register.user_pwd,callback:function(t){e.$set(e.register,"user_pwd",t)},expression:"register.user_pwd"}},[r("template",{slot:"prepend"},[r("i",{staticClass:"el-icon-lock"})])],2)],1),r("el-form-item",{attrs:{label:"确认密码",prop:"user_pwd1"}},[r("el-input",{attrs:{placeholder:"Password",size:"mini","show-password":""},model:{value:e.register.user_pwd1,callback:function(t){e.$set(e.register,"user_pwd1",t)},expression:"register.user_pwd1"}},[r("template",{slot:"prepend"},[r("i",{staticClass:"el-icon-lock"})])],2)],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"Email",size:"mini"},model:{value:e.register.email,callback:function(t){e.$set(e.register,"email",t)},expression:"register.email"}},[r("template",{slot:"prepend"},[r("i",{staticClass:"el-icon-message"})])],2)],1),r("el-form-item",{attrs:{label:"手机",prop:"phone"}},[r("el-input",{attrs:{placeholder:"Phone",size:"mini"},model:{value:e.register.phone,callback:function(t){e.$set(e.register,"phone",t)},expression:"register.phone"}},[r("template",{slot:"prepend"},[r("i",{staticClass:"el-icon-mobile-phone"})])],2)],1),r("el-form-item",{staticClass:"button-div"},[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.customAdd()}}},[e._v("提交")]),r("el-button",{attrs:{type:"",size:"mini"},on:{click:function(t){e.dialogAddCustomVisible=!1}}},[e._v("取消")])],1)],1)],1)])],1)},s=[],i=(r("b64b"),r("96c3")),n=r("7ded"),l=r("ca00"),o=r("47d7"),u={name:"Friend",data:function(){var e=this,t=/^(((13[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[3-8]{1})|(18[0-9]{1})|(19[0-9]{1})|(14[5-7]{1}))+\d{8})$/,r=function(t,r,a){""===r?a(new Error("请输入密码")):(console.log(e.register),a())},a=function(t,r,a){""===r?a(new Error("请再次输入密码")):r!==e.register.user_pwd?a(new Error("两次输入密码不一致!")):a()},s=function(e,r,a){""===r?a(new Error("请输入手机号")):t.test(r)?a():a(new Error("请输入正确的手机号"))};return{tableData:[],loginInfo:"",currentPage:1,pageSize:10,total:0,drawer:!1,direction:"rtl",drawerFriend:{},drawerBoard:{},queryInfo:{},dialogAddCustomVisible:!1,register:{user_account:"",user_pwd:"",user_pwd1:"",phone:"",email:"",auth:!1},rules:{user_account:[{required:!0,message:"请输入用户名",trigger:"blur"}],user_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:r,trigger:"blur"}],user_pwd1:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:a,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:s,trigger:["blur","change"]}]}}},mounted:function(){this.loginInfo=Object(l["b"])(),this.findAll()},methods:{findAll:function(){for(var e=this,t=Object.keys(this.queryInfo),r=0,a=t;r<a.length;r++){var s=a[r];!this.queryInfo[s]&&delete this.queryInfo[s]}i["a"].findUsersByLikeQuery({index:this.currentPage,perPage:this.pageSize,userInfo:this.queryInfo}).then((function(t){e.tableData=t.obj,e.currentPage=t.pageNum,e.pageSize=t.pageSize,e.total=t.totalSize}))},setGender:function(e,t,r,a){return 1===e.gender?"男":"女"},handleEdit:function(e,t){console.log(e,t)},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.pageSize=e,this.findAll()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.findAll()},customAdd:function(){var e=this;this.dialogAddCustomVisible=!1,this.$refs.ruleForm.validate((function(t){if(!t)return e.$message.error("验证未通过，请检查后重试"),!1;n["a"].doRegister(e.register).then((function(t){666===t.code?(e.$message.success("添加用户成功"),e.findAll()):e.$message.error(t.message)}))}))},handleDelete:function(e,t){var r=this;this.$confirm("删除用户".concat(t.sname,"是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i["a"].delete({account:t.user_account}).then((function(e){666===e.code?(r.$message.success(e.message),r.findAll()):r.$message.error(e.message)}))})).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},handleDetail:function(e,t){var r=this;this.drawer=!0,this.drawerFriend=t,o["a"].queryBoardMsg({account:t.user_account}).then((function(e){666===e.code&&(r.drawerBoard=e.obj)}))},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))}}},c=u,d=r("2877"),p=Object(d["a"])(c,a,s,!1,null,null,null);t["default"]=p.exports},"7ded":function(e,t,r){"use strict";var a=r("b775"),s=[{name:"doRegister",url:"/stu/doRegistry",type:"post"},{name:"doLogin",url:"/doLogin",type:"post"},{name:"sendCode",url:"/sendCode",type:"get"},{name:"verify",url:"/verify",type:"post"},{name:"changePwd",url:"/changePwd",type:"post"}],i=a["a"].createApiObj(s);t["a"]=i},"96c3":function(e,t,r){"use strict";var a=r("b775"),s=[{name:"findAll",url:"/admin/findAll",type:"get"},{name:"delete",url:"/admin/delete",type:"post"},{name:"findUsersByLikeQuery",url:"/admin/findUsersByLikeQuery?index=1&perPage=100",type:"post"},{name:"getChatLogsName",url:"/admin/getChatLogsName",type:"get"},{name:"getChatLog",url:"/admin/getChatLog",type:"get"}],i=a["a"].createApiObj(s);t["a"]=i}}]);