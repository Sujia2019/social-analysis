(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4239d862"],{"4caf":function(e,t,n){"use strict";n("e159")},"4d63":function(e,t,n){var s=n("83ab"),r=n("da84"),o=n("94ca"),i=n("7156"),c=n("9bf2").f,a=n("241c").f,u=n("44e7"),l=n("ad6d"),f=n("9f7f"),d=n("6eeb"),g=n("d039"),h=n("69f3").set,p=n("2626"),v=n("b622"),b=v("match"),m=r.RegExp,I=m.prototype,x=/a/g,y=/a/g,N=new m(x)!==x,w=f.UNSUPPORTED_Y,E=s&&o("RegExp",!N||w||g((function(){return y[b]=!1,m(x)!=x||m(y)==y||"/a/i"!=m(x,"i")})));if(E){var _=function(e,t){var n,s=this instanceof _,r=u(e),o=void 0===t;if(!s&&r&&e.constructor===_&&o)return e;N?r&&!o&&(e=e.source):e instanceof _&&(o&&(t=l.call(e)),e=e.source),w&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var c=i(N?new m(e,t):m(e,t),s?this:I,_);return w&&n&&h(c,{sticky:n}),c},T=function(e){e in _||c(_,e,{configurable:!0,get:function(){return m[e]},set:function(t){m[e]=t}})},k=a(m),S=0;while(k.length>S)T(k[S++]);I.constructor=_,_.prototype=I,d(r,"RegExp",_)}p("RegExp")},7156:function(e,t,n){var s=n("861d"),r=n("d2bb");e.exports=function(e,t,n){var o,i;return r&&"function"==typeof(o=t.constructor)&&o!==n&&s(i=o.prototype)&&i!==n.prototype&&r(e,i),e}},a9e3:function(e,t,n){"use strict";var s=n("83ab"),r=n("da84"),o=n("94ca"),i=n("6eeb"),c=n("5135"),a=n("c6b6"),u=n("7156"),l=n("c04e"),f=n("d039"),d=n("7c73"),g=n("241c").f,h=n("06cf").f,p=n("9bf2").f,v=n("58a8").trim,b="Number",m=r[b],I=m.prototype,x=a(d(I))==b,y=function(e){var t,n,s,r,o,i,c,a,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=v(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:s=2,r=49;break;case 79:case 111:s=8,r=55;break;default:return+u}for(o=u.slice(2),i=o.length,c=0;c<i;c++)if(a=o.charCodeAt(c),a<48||a>r)return NaN;return parseInt(o,s)}return+u};if(o(b,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var N,w=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof w&&(x?f((function(){I.valueOf.call(n)})):a(n)!=b)?u(new m(y(t)),n,w):y(t)},E=s?g(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),_=0;E.length>_;_++)c(m,N=E[_])&&!c(w,N)&&p(w,N,h(m,N));w.prototype=I,I.constructor=w,i(r,b,w)}},d9b5:function(e,t,n){"use strict";n.r(t);var s=function(){var e,t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"chat-box"},[s("header",[t._v("聊天室人数："+t._s(t.count))]),s("div",{ref:"msg-box",staticClass:"msg-box"},t._l(t.list,(function(e,n){return s("div",{key:n,staticClass:"msg",style:e.userId==t.userId?"flex-direction:row-reverse":""},[s("div",{staticClass:"user-head"},[s("div",{staticClass:"head",style:" background: hsl("+t.getUserHead(e.userId,"bck")+", 88%, 62%); clip-path:polygon("+t.getUserHead(e.userId,"polygon")+"% 0,100% 100%,0% 100%); transform: rotate("+t.getUserHead(e.userId,"rotate")+"deg)"})]),s("div",{staticClass:"user-msg"},[s("div",{class:e.userId==t.userId?"user-name-right":""},[s("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"center"}},[t._v(t._s(e.userName)),s("div",{staticStyle:{"margin-left":"5px","font-size":"60%",color:"cadetblue"}},[t._v(t._s(new Date(e.userId).Format("yy-MM-dd hh:mm:ss")))])])]),s("div",{staticClass:"msg-div",class:e.userId==t.userId?"right":"left"},[t._v(t._s(e.content))])])])})),0),s("div",{staticClass:"input-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.contentText,expression:"contentText"}],ref:"sendMsg",attrs:{type:"text"},domProps:{value:t.contentText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendText()},input:function(e){e.target.composing||(t.contentText=e.target.value)}}}),s("div",{staticClass:"btn",class:(e={},e["btn-active"]=t.contentText,e),on:{click:function(e){return t.sendText()}}},[t._v("发送")])])])},r=[],o=(n("99af"),n("caad"),n("a9e3"),n("4d63"),n("ac1f"),n("25f0"),n("2532"),n("5319"),n("2909")),i=n("ca00"),c={data:function(){return{ws:null,count:0,userId:null,list:[],contentText:"",loginUser:null}},created:function(){this.getUserID(),this.loginUser=Object(i["b"])()},mounted:function(){this.initWebSocket(),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,this.getFullYear()+"")),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}},destroyed:function(){this.ws.close()},methods:{getUserID:function(){var e=(new Date).getTime();this.userId=e},getUserHead:function(e,t){var n=String(e);return"bck"==t?Number(n.substring(n.length-3)):"polygon"==t?Number(n.substring(n.length-2)):"rotate"==t?Number(n.substring(n.length-3)):void 0},scrollBottm:function(){var e=this.$refs["msg-box"];e.scrollTop=e.scrollHeight},sendText:function(){var e=this;if(e.$refs["sendMsg"].focus(),e.contentText){var t={userId:e.userId,userName:e.loginUser.user_account,msg:e.contentText};e.ws.send(JSON.stringify(t)),e.contentText="",setTimeout((function(){e.scrollBottm()}),500)}},initWebSocket:function(){var e=this;if(window.WebSocket){var t=new WebSocket("ws://47.93.225.242:8888/websocket");e.ws=t,console.log(t),t.onopen=function(e){console.log("服务器连接成功")},t.onclose=function(e){console.log("服务器连接关闭")},t.onerror=function(){console.log("服务器连接出错")},t.onmessage=function(t){console.log(t);var n=t.data;console.log(n),n.includes("有新连接加入")?(console.log(n[n.length-1]),e.count=n[n.length-1]):(n=JSON.parse(n),e.list=[].concat(Object(o["a"])(e.list),[{userId:n.userId,userName:n.userName,content:n.msg}]))}}}}},a=c,u=(n("4caf"),n("2877")),l=Object(u["a"])(a,s,r,!1,null,"03e13a10",null);t["default"]=l.exports},e159:function(e,t,n){}}]);